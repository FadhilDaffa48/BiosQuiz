<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randomized BBB Quiz</title>
    <style>
        /* --- General Layout and Container --- */
        body { font-family: sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f4f4f4; color: #333; }
        .quiz-container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 8px 15px rgba(0,0,0,0.1); text-align: center; }
        .question-box { background: #e6f7ff; padding: 25px; border-radius: 8px; margin-bottom: 20px; min-height: 150px; display: flex; flex-direction: column; justify-content: space-between; }
        .question-box h4 { margin: 0; font-size: 1.25em; color: #5B4F8C; /* Dark Purple */ text-align: left; }

        /* --- Options Styling (Green/Purple Theme, Left Alignment) --- */
        .options { margin-top: 20px; text-align: left; }
        .options label { 
            display: block; 
            margin: 10px 0; 
            padding: 12px 15px; 
            background-color: #E6F3EB; /* Light Green */
            color: #38761D; /* Darker Green Text */
            border: 1px solid #c3e6cb; 
            border-radius: 6px; 
            cursor: pointer; 
            transition: background-color 0.2s, transform 0.1s; 
            font-weight: bold; 
        }
        .options label:hover { 
            background-color: #D4EDDA; 
            transform: translateY(-1px); 
        }
        .options input[type="radio"] { display: none; }
        /* Style for the selected option label (Purple) */
        .options input:checked + label { 
            background-color: #5B4F8C; /* Purple */
            color: white; 
            border-color: #5B4F8C; 
        }

        /* --- Feedback and Buttons --- */
        .feedback { margin-top: 15px; padding: 10px; border-radius: 6px; font-weight: bold; display: none; text-align: left; }
        .correct-feedback { background-color: #D4EDDA; color: #155724; border: 1px solid #c3e6cb; }
        .incorrect-feedback { background-color: #F8D7DA; color: #721C24; border: 1px solid #f5c6cb; }
        
        #quiz-controls button { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; margin-top: 15px; transition: background-color 0.2s; }
        #check-btn { background-color: #8C5B4F; color: white; /* Earthy Red/Brown for check */ }
        #check-btn:disabled { background-color: #ccc; cursor: not-allowed; }
        #next-btn { background-color: #5B4F8C; color: white; /* Purple for next */ display: none; }

        #end-splash { padding: 30px; background-color: #5B4F8C; color: white; border-radius: 10px; display: none; }
        #end-splash h2 { margin-top: 0; font-size: 2em; }
        #end-splash p { font-size: 1.2em; }
        #end-splash button { background-color: white; color: #5B4F8C; margin-top: 20px; }
    </style>
</head>
<body>

<div class="quiz-container">
    <div id="quiz-screen">
        <div id="question-count"></div>
        <div class="question-box" id="question-box">
            </div>
        <div id="quiz-controls">
            <button id="check-btn">Check Answer</button>
            <button id="next-btn">Next Question</button>
        </div>
    </div>
    
    <div id="end-splash">
        </div>
</div>

<script>
const quizData = [
    // --- FULL QUESTION DATA ARRAY ---
    { q: "What causes the mislocalization of Claudin-5, a critical tight junction protein?", options: ["a) BBB Breakdown", "b) MMP Overexpression", "c) Reduction in Astrocytic Endfeet", "d) Increased Transcellular Transport"], answer: "b) MMP Overexpression" },
    { q: "What is the previously tested control drug that served as a positive benchmark for MMP inhibition?", options: ["a) Prinomastat", "b) Quercetin", "c) Minocycline", "d) Tacrolimus"], answer: "a) Prinomastat" },
    { q: "How does intranasal delivery work to deliver therapeutic agents directly to the brain?", options: ["a) Through the olfactory nerve/epithelium to the cerebrospinal fluid, bypassing the BBB", "b) Through tight junction opening in the nasal mucosa then systemic absorption", "c) Direct injection into the cranial sinus", "d) Uptake via the trigeminal nerve and subsequent transport to the thalamus"], answer: "a) Through the olfactory nerve/epithelium to the cerebrospinal fluid, bypassing the BBB" },
    { q: "What compounds are predicted to mitigate BBB breakdown, likely through MMP inhibition or anti-inflammatory action?", options: ["a) Lutein", "b) Carotene", "c) Kaempferol", "d) Resveratrol"], answer: "c) Kaempferol" },
    { q: "Claudin-5 is a key component of which cellular structure in the brain's endothelial cells?", options: ["a) Adherens junctions", "b) Gap junctions", "c) Tight junctions", "d) Desmosomes"], answer: "c) Tight junctions" },
    { q: "The degradation of Claudin-5 is often mediated by which type of enzyme?", options: ["a) Kinases", "b) Phosphatases", "c) Matrix Metalloproteinases (MMPs)", "d) Acetyltransferases"], answer: "c) Matrix Metalloproteinases (MMPs)" },
    { q: "Mislocalization of Claudin-5 often leads to what physiological consequence at the BBB?", options: ["a) Increased glucose transport", "b) Increased paracellular permeability", "c) Enhanced transcellular transport", "d) Reduced inflammatory response"], answer: "b) Increased paracellular permeability" },
    { q: "Which neurological disorders are often associated with Claudin-5 mislocalization and BBB compromise?", options: ["a) Parkinson's disease and Huntington's disease", "b) Multiple Sclerosis and Alzheimer's disease", "c) Peripheral neuropathy", "d) Amyotrophic Lateral Sclerosis (ALS) only"], answer: "b) Multiple Sclerosis and Alzheimer's disease" },
    { q: "What is the primary role of Matrix Metalloproteinases (MMPs) in a healthy central nervous system?", options: ["a) Production of neurotransmitters", "b) Remodeling of the extracellular matrix (ECM)", "c) Maintaining neuronal membrane potential", "d) Degradation of myelin sheath"], answer: "b) Remodeling of the extracellular matrix (ECM)" },
    { q: "Overexpression of which specific MMP is most frequently implicated in BBB degradation and stroke?", options: ["a) MMP-2", "b) MMP-9", "c) MMP-1", "d) MMP-14"], answer: "b) MMP-9" },
    { q: "The mechanism of action for the control drug Prinomastat is likely classified as what?", options: ["a) Angiotensin-converting enzyme inhibitor", "b) Broad-spectrum MMP inhibitor", "c) Non-steroidal anti-inflammatory drug (NSAID)", "d) Free radical scavenger"], answer: "b) Broad-spectrum MMP inhibitor" },
    { q: "Which signaling pathway, when activated, often leads to the *upregulation* of MMP transcription?", options: ["a) Wnt signaling", "b) NF-κB signaling", "c) Sonic hedgehog signaling", "d) mTOR signaling"], answer: "b) NF-κB signaling" },
    { q: "Intranasal drug delivery bypasses which major physiological barrier to reach the brain?", options: ["a) The Blood-Cerebrospinal Fluid Barrier (BCSFB)", "b) The Arachnoid Barrier", "c) The Blood-Brain Barrier (BBB)", "d) The Choroid Plexus"], answer: "c) The Blood-Brain Barrier (BBB)" },
    { q: "What is the main anatomical pathway thought to facilitate the transport of drugs from the nasal cavity to the brain?", options: ["a) Olfactory bulb capillaries", "b) Direct transport via the trigeminal nerve", "c) Perineural and perivascular routes via the olfactory epithelium", "d) Systemic circulation followed by rapid uptake"], answer: "c) Perineural and perivascular routes via the olfactory epithelium" },
    { q: "Quercetin and Kaempferol belong to which major class of natural compounds?", options: ["a) Terpenoids", "b) Alkaloids", "c) Flavonoids", "d) Polysaccharides"], answer: "c) Flavonoids" },
    { q: "What is the common mechanism by which natural compounds like Kaempferol are hypothesized to mitigate BBB breakdown?", options: ["a) Acting as a Calcium channel blocker", "b) Direct competitive binding to Claudin-5", "c) Anti-oxidant and anti-inflammatory properties, potentially downregulating MMPs", "d) Enhancing microglial phagocytosis"], answer: "c) Anti-oxidant and anti-inflammatory properties, potentially downregulating MMPs" },
    { q: "Which experimental technique is commonly used to quantify BBB integrity *in vitro* (e.g., in a transwell model)?", options: ["a) Western blotting", "b) Measurement of Trans-Endothelial Electrical Resistance (TEER)", "c) Enzyme-Linked Immunosorbent Assay (ELISA)", "d) Polymerase Chain Reaction (PCR)"], answer: "b) Measurement of Trans-Endothelial Electrical Resistance (TEER)" },
    { q: "In an *in vivo* model, BBB breakdown is often assessed by measuring the extravasation of which marker?", options: ["a) Glucose", "b) Albumin", "c) Evans Blue dye (or Sodium Fluorescein)", "d) Neurotransmitter metabolites"], answer: "c) Evans Blue dye (or Sodium Fluorescein)" },
    { q: "What specific cell type forms the crucial anatomical basis of the Blood-Brain Barrier?", options: ["a) Astrocytes", "b) Brain Microvascular Endothelial Cells (BMVECs)", "c) Pericytes", "d) Oligodendrocytes"], answer: "b) Brain Microvascular Endothelial Cells (BMVECs)" },
    { q: "In the study, the beneficial effects of the compounds are likely compared against the effects of which substance/model?", options: ["a) High-dose neuroleptic drugs", "b) An induced condition mimicking BBB breakdown (e.g., ischemia or inflammation)", "c) Healthy, untreated controls only", "d) A general metabolic stimulant"], answer: "b) An induced condition mimicking BBB breakdown (e.g., ischemia or inflammation)" }
];

let currentQuestionIndex = 0;
let userScore = 0;
let answeredThisQuestion = false;
const optionLabels = ['a', 'b', 'c', 'd']; // Static labels to display

const quizScreen = document.getElementById('quiz-screen');
const endSplash = document.getElementById('end-splash');
const questionBox = document.getElementById('question-box');
const checkBtn = document.getElementById('check-btn');
const nextBtn = document.getElementById('next-btn');
const questionCountDisplay = document.getElementById('question-count');

// --- Helper function for shuffling arrays (Fisher-Yates) ---
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// --- Main quiz logic functions ---
function loadQuestion() {
    if (currentQuestionIndex >= quizData.length) {
        showEndScreen();
        return;
    }

    const item = quizData[currentQuestionIndex];
    answeredThisQuestion = false;

    // Shuffle the options array for randomization
    const shuffledOptions = [...item.options]; 
    shuffleArray(shuffledOptions); 

    // Reset controls
    checkBtn.style.display = 'inline-block';
    nextBtn.style.display = 'none';
    checkBtn.disabled = true; // Disable until an option is selected
    
    // Update question counter
    questionCountDisplay.textContent = `Question ${currentQuestionIndex + 1} of ${quizData.length}`;

    // Build the content for the question box
    let htmlContent = `
        <h4>${item.q}</h4>
        <div class="options">
    `;

    // Use static labels (a, b, c, d) and assign shuffled content to them
    shuffledOptions.forEach((option, index) => {
        const labelText = optionLabels[index]; // 'a', 'b', 'c', or 'd'
        
        htmlContent += `
            <input type="radio" id="q${currentQuestionIndex}o${index}" name="currentQuestion" value="${option}">
            <label for="q${currentQuestionIndex}o${index}">${labelText}) ${option.substring(option.indexOf(')') + 1).trim()}</label>
        `;
    });

    htmlContent += `
        </div>
        <div class="feedback" id="feedback-${currentQuestionIndex}"></div>
    `;
    
    questionBox.innerHTML = htmlContent;

    // Add event listener to enable check button on selection
    document.querySelectorAll('input[name="currentQuestion"]').forEach(input => {
        input.addEventListener('change', () => {
            checkBtn.disabled = false;
        });
    });
}

function checkAnswer() {
    if (answeredThisQuestion) return; 

    const selectedOption = document.querySelector('input[name="currentQuestion"]:checked');
    const feedbackDiv = document.getElementById(`feedback-${currentQuestionIndex}`);
    const item = quizData[currentQuestionIndex];
    
    feedbackDiv.style.display = 'block';
    answeredThisQuestion = true;

    // Disable all options
    document.querySelectorAll('input[name="currentQuestion"]').forEach(input => input.disabled = true);

    if (!selectedOption) {
        feedbackDiv.className = 'feedback incorrect-feedback';
        feedbackDiv.innerHTML = `⚠️ Unanswered. The correct answer is: <strong>${item.answer}</strong>`;
    } else {
        const userAnswer = selectedOption.value;
        if (userAnswer === item.answer) {
            userScore++;
            feedbackDiv.className = 'feedback correct-feedback';
            feedbackDiv.innerHTML = '✅ **Correct!**';
        } else {
            // Highlight the correct answer
            document.querySelectorAll('label').forEach(label => {
                const inputElement = document.getElementById(label.htmlFor);
                if (inputElement && inputElement.value === item.answer) {
                    label.style.backgroundColor = '#90ee90'; // Light green highlight for correct answer
                    label.style.color = '#155724';
                }
            });

            feedbackDiv.className = 'feedback incorrect-feedback';
            feedbackDiv.innerHTML = `❌ **Incorrect.** The correct answer is: <strong>${item.answer}</strong>`;
        }
    }
    
    // Show Next button, hide Check button
    checkBtn.style.display = 'none';
    nextBtn.style.display = 'inline-block';
}

function nextQuestion() {
    currentQuestionIndex++;
    loadQuestion();
}

function showEndScreen() {
    quizScreen.style.display = 'none';
    endSplash.style.display = 'block';

    const percentage = Math.round((userScore / quizData.length) * 100);
    let message = '';

    if (percentage >= 90) {
        message = 'Excellent! You\'ve mastered the BBB concepts. 🧠';
    } else if (percentage >= 70) {
        message = 'Great job! You have a solid understanding. Keep studying! 💪';
    } else {
        message = 'Good start! Review the topics to strengthen your knowledge. 📚';
    }

    endSplash.innerHTML = `
        <h2>Quiz Complete!</h2>
        <p>${message}</p>
        <p>Your Final Score:</p>
        <h1>${userScore} / ${quizData.length}</h1>
        <p>(${percentage}%)</p>
        <button onclick="window.location.reload()">Start Over</button>
    `;
}

// --- Initial Setup ---

// 1. Shuffle the entire quizData array when the script first runs (Question Randomization)
shuffleArray(quizData);

// Event Listeners
checkBtn.addEventListener('click', checkAnswer);
nextBtn.addEventListener('click', nextQuestion);

// Initial Load
loadQuestion();
</script>

</body>
</html>

